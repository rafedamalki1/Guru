DEF VAR CC AS INTEGER.
FIND FIRST FORETAG NO-LOCK.
REPEAT:
   OPEN QUERY AQ FOR EACH aonrtab WHERE AUTOREG = TRUE NO-LOCK.   
   
   GET FIRST AQ NO-LOCK.
   CC = TIME. 
   DO WHILE AVAILABLE(AONRTAB):
      DO TRANSACTION:
         REPEAT:
            GET CURRENT AQ EXCLUSIVE-LOCK NO-WAIT.
            IF LOCKED(AONRTAB) = TRUE THEN DO:
               MESSAGE  STRING(TIME - CC,"HH:MM:SS").
               DISPLAY AONRTAB.AONR AONRTAB.DELNR STRING(TIME - CC,"HH:MM:SS") WITH FRAME CC.
               PAUSE 1.
               HIDE FRAME CC NO-PAUSE.
            END.
            ELSE LEAVE.
         END.
      END.
      CC = TIME. 
      GET NEXT AQ NO-LOCK.   
      IF AVAILABLE AONRTAB THEN DISPLAY AONRTAB.AONR DELNR ORT WITH FRAME AA.
      IF FORETAG.FORETAG = "ELPA" THEN PAUSE 1. 
      HIDE FRAME AA NO-PAUSE.
      IF AVAILABLE AONRTAB THEN  MESSAGE  AONRTAB.AONR DELNR ORT.
   END.
END.
