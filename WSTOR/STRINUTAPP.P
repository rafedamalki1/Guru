/*
     Filename: STRINUTAPP.P
      Created: 03.08.0001 14:14ELPAO     
     Modified: 
*/

PROCEDURE laddadir_UI:
   DEFINE INPUT PARAMETER ganv AS CHARACTER NO-UNDO.
   DEFINE OUTPUT PARAMETER dnamn AS CHARACTER NO-UNDO.
   FIND FIRST MINNE WHERE MINNE.ANVANDARE = ganv + "$" + "STOR" 
   USE-INDEX ANV NO-LOCK NO-ERROR.
   IF AVAILABLE MINNE THEN dnamn = MINNE.RESULTATET.
   ELSE dnamn = SESSION:TEMP-DIRECTORY.
END PROCEDURE.

PROCEDURE sparadir_UI:
   DEFINE INPUT PARAMETER ganv AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER dnamn AS CHARACTER NO-UNDO.
   
   DO TRANSACTION:
      FIND FIRST MINNE WHERE MINNE.ANVANDARE = ganv + "$" + "STOR"
      USE-INDEX ANV EXCLUSIVE-LOCK NO-ERROR.
      IF AVAILABLE MINNE THEN MINNE.RESULTATET = dnamn.
      ELSE DO:
         CREATE MINNE.
         ASSIGN
         MINNE.ANVANDARE = ganv + "$" + "STOR"
         MINNE.RESULTATET = dnamn.
      END.
   END.
   IF AVAILABLE MINNE THEN RELEASE MINNE.
END PROCEDURE.
