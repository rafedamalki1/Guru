DEF VAR pnr AS CHARACTER.
DEFINE TEMP-TABLE pkod
   FIELD PERSONALKOD AS CHARACTER
   FIELD PERSONNUMMER AS CHARACTER    
   FIELD FORNAMN AS CHARACTER
   FIELD EFTERNAMN AS CHARACTER
   FIELD ADRESS AS CHARACTER
   FIELD POSTNR AS CHARACTER
   FIELD POSTADRESS AS CHARACTER
   FIELD TELEFON AS CHARACTER
   FIELD PNR AS CHARACTER .

INPUT FROM F:\DELAD\ELPOOL\ELPLO\graninge\nypersonalgadm26.skv.
REPEAT TRANSACTION:
  CREATE pkod.
  ASSIGN.
  IMPORT DELIMITER ";" pkod.
END.   
FOR EACH pkod :
   DISPLAY pkod.
   pkod.pnr = SUBSTRING(personnummer,1,2) + SUBSTRING( personnummer,4,2) +
   SUBSTRING( personnummer,7,2) + "-" + SUBSTRING( personnummer,10,4) .
   DISPLAY pkod.pnr FORMAT "x(15)".
   FIND FIRST PERSONALTAB WHERE PERSONALTAB.PERSONALKOD = pkod.PERSONALKOD NO-LOCK NO-ERROR.
   IF AVAILABLE PERSONALTAB  THEN DO TRANSACTION:
      FIND CURRENT PERSONALTAB EXCLUSIVE-LOCK NO-ERROR.
      ASSIGN 
      PERSONALTAB.FORNAMN = pkod.FORNAMN
      PERSONALTAB.EFTERNAMN = pkod.EFTERNAMN
      PERSONALTAB.GATUADRESS = pkod.ADRESS
      PERSONALTAB.POSTNUMMER = pkod.POSTNR
      PERSONALTAB.POSTADRESS = pkod.POSTADRESS
      PERSONALTAB.TELEFON = pkod.TELEFON
      PERSONALTAB.PERSONNUMMER = pkod.PNR
      PERSONALTAB.ORGCHEF = "10202".      
   END.
END.

   
   
   /*FIND FIRST PERSONALTAB WHERE PERSONALTAB.PERSONALKOD = pekod.PINNAN NO-LOCK NO-ERROR.
   IF AVAILABLE PERSONALTAB  THEN DO TRANSACTION:   */
