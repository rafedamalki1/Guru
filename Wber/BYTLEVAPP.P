/*BYTLEVAPP.P*/


PROCEDURE kontroll_UI :
   DEFINE INPUT PARAMETER lev1 AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER lev2 AS CHARACTER NO-UNDO.
   DEFINE OUTPUT PARAMETER felmedd AS CHARACTER NO-UNDO.
   DEFINE OUTPUT PARAMETER val AS INTEGER NO-UNDO.
   ASSIGN
   felmedd = ""
   val = 0.
   FIND FIRST LEVERANTOR WHERE LEVERANTOR.LEVNAMN = lev1 NO-LOCK NO-ERROR.
   IF AVAILABLE LEVERANTOR THEN DO:
      FIND FIRST MTRLBER WHERE MTRLBER.LEVKOD = LEVERANTOR.LEVKOD 
      NO-LOCK NO-ERROR.
      IF NOT AVAILABLE MTRLBER THEN DO:
         felmedd = "Det finns inget materiel från " + LEVERANTOR.LEVNAMN + " upplagt.".
         RETURN.
      END.
      ELSE DO: 
         FIND FIRST LEVERANTOR WHERE LEVERANTOR.LEVNAMN = lev2 NO-LOCK NO-ERROR.
         IF AVAILABLE LEVERANTOR THEN DO:
            FIND FIRST MTRL WHERE MTRL.LEVKOD = LEVERANTOR.LEVKOD AND   
            MTRL.KALKNR = 0 NO-LOCK NO-ERROR.
            IF NOT AVAILABLE MTRL THEN DO:
               felmedd = "Det finns ingen materielkatalog upplagd för " + LEVERANTOR.LEVNAMN.               
               RETURN.
            END.
            ELSE DO:
               val = 1.
            END.
         END.
      END.
   END.

END PROCEDURE.
