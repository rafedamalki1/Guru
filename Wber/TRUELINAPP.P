/*TRULINAPP.P*/

DEFINE VARIABLE felmedd AS CHARACTER NO-UNDO.

PROCEDURE btnok_UI :
   DEFINE INPUT PARAMETER mtrl_rowid AS ROWID NO-UNDO.
   DEFINE INPUT PARAMETER antalvar AS INTEGER NO-UNDO.
   DEFINE OUTPUT PARAMETER felmedd AS CHARACTER NO-UNDO.
   felmedd = "".
   DO TRANSACTION:
      FIND FIRST MTRLBER WHERE ROWID(MTRLBER) = mtrl_rowid EXCLUSIVE-LOCK NO-ERROR.
      IF AVAILABLE MTRLBER THEN DO:
         ASSIGN 
         MTRLBER.LINKAB = TRUE 
         MTRLBER.DIAMETER = antalvar
         MTRLBER.ANTAL = 0.        
      END.
      ELSE DO:
         ASSIGN felmedd = "Ändring Lin/Kab gick ej att utföra, kontakta Elpool.".
      END.
   END.
   RELEASE MTRLBER NO-ERROR.
   
END PROCEDURE.
