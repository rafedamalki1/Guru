/*VARDDEP.P*/
{TMPUT.i}
/*DEFINE TEMP-TABLE temp_ut
 FIELD BENAMNING  LIKE MTRLDEP.BENAMNING 
 FIELD BESTKVANT  LIKE MTRLDEP.BESTKVANT 
 FIELD BESTPUNKT  LIKE MTRLDEP.BESTPUNKT 
 FIELD BPRIS      LIKE MTRLDEP.BPRIS 
 FIELD DEPNR      LIKE MTRLDEP.DEPNR 
 FIELD ENHET      LIKE MTRLDEP.ENHET 
 FIELD ENR        LIKE MTRLDEP.ENR 
 FIELD FACKID     LIKE MTRLDEP.FACKID 
 FIELD IB         LIKE MTRLDEP.IB 
 FIELD IBDATUM    LIKE MTRLDEP.IBDATUM 
 FIELD INVANT     LIKE MTRLDEP.INVANT 
 FIELD INVDATUM   LIKE MTRLDEP.INVDATUM 
 FIELD LAGER      LIKE MTRLDEP.LAGER 
 FIELD LEVKOD     LIKE MTRLDEP.LEVKOD 
 FIELD NPRIS      LIKE MTRLDEP.NPRIS 
 FIELD OMSATT     LIKE MTRLDEP.OMSATT 
 FIELD SALDO      LIKE MTRLDEP.SALDO
 INDEX ENR ENR.*/

DEFINE INPUT PARAMETER vald_depa AS INTEGER.
DEFINE OUTPUT PARAMETER TABLE FOR tmp_ut.

   OPEN QUERY mtrlq FOR EACH MTRLDEP WHERE MTRLDEP.DEPNR = vald_depa 
   AND MTRLDEP.IBDATUM = ? USE-INDEX ENR NO-LOCK.
   GET FIRST mtrlq NO-LOCK.
   DO WHILE AVAILABLE(MTRLDEP):                         
      CREATE tmp_ut.
      BUFFER-COPY MTRLDEP TO tmp_ut.            
      GET NEXT mtrlq NO-LOCK.              
   END. 
   CLOSE QUERY mtrlq.   
