/*BERLISTAPP.P*/

{BERKALKTEMP.I}
DEFINE VARIABLE valaonr AS CHARACTER NO-UNDO.
DEFINE VARIABLE valomrade AS CHARACTER NO-UNDO. 

PROCEDURE laddaberlista_UI :
   DEFINE INPUT PARAMETER valaonr2 AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER valomrade2 AS CHARACTER NO-UNDO.   
   DEFINE OUTPUT PARAMETER TABLE FOR berkalktemp.
   ASSIGN
   valaonr = valaonr2 
   valomrade = valomrade2.
   FIND FIRST BERKALK WHERE BERKALK.AONR = valaonr AND
   BERKALK.OMRADE = valomrade USE-INDEX OMR NO-LOCK NO-ERROR.
   IF AVAILABLE BERKALK THEN DO:    
      CREATE berkalktemp.
      BUFFER-COPY BERKALK TO berkalktemp.
   END.
   
END PROCEDURE.
PROCEDURE laddaberlistak_UI :
   DEFINE INPUT PARAMETER valaonr2 AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER valomrade2 AS CHARACTER NO-UNDO.
   DEFINE OUTPUT PARAMETER TABLE FOR berkalktemp.
   ASSIGN
   valaonr = valaonr2 
   valomrade = valomrade2.
   FIND FIRST BERKALK WHERE BERKALK.AONR = valaonr AND
   BERKALK.OMRADE = valomrade USE-INDEX OMR NO-LOCK NO-ERROR.
   IF AVAILABLE BERKALK THEN DO:  
      CREATE berkalktemp.
      BUFFER-COPY BERKALK TO berkalktemp.
   END.
   
END PROCEDURE.
PROCEDURE hmtkalkupg_UI :
   DEFINE INPUT PARAMETER valaonr2 AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER valomrade2 AS CHARACTER NO-UNDO.
   DEFINE OUTPUT  PARAMETER p3var  AS LOGICAL NO-UNDO.
   FIND FIRST BEREDNING WHERE  BEREDNING.BERNR = INTEGER(valaonr2) AND BEREDNING.OMRADE = valomrade2 NO-LOCK NO-ERROR.
   IF AVAILABLE BEREDNING THEN DO:
      ASSIGN 
      p3var = BEREDNING.KALKYL.
   END.   
END PROCEDURE.
PROCEDURE hmtuppg_UI :
   DEFINE INPUT PARAMETER valaonr2 AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER valomrade2 AS CHARACTER NO-UNDO.
   DEFINE OUTPUT  PARAMETER pnr  AS CHARACTER NO-UNDO.
   DEFINE OUTPUT PARAMETER dnr AS INTEGER NO-UNDO.
   DEFINE OUTPUT  PARAMETER bernamn AS CHARACTER NO-UNDO.
   DEFINE OUTPUT  PARAMETER blag AS CHARACTER NO-UNDO.

   FIND FIRST BEREDNING WHERE  BEREDNING.BERNR = INTEGER(valaonr2) AND BEREDNING.OMRADE = valomrade2 NO-LOCK NO-ERROR.
   IF AVAILABLE BEREDNING THEN DO:
      ASSIGN 
      pnr = BEREDNING.AONR
      dnr = BEREDNING.DELNR.      
      FIND FIRST ANVANDARE WHERE ANVANDARE.ANVANDARE = BEREDNING.ANVANDARE NO-LOCK NO-ERROR.
      IF AVAILABLE ANVANDARE THEN DO:
         bernamn = ANVANDARE.AV-NAMN.
      END.
   END.
   
   FIND FIRST JURPERS NO-LOCK NO-ERROR.
   IF AVAILABLE JURPERS THEN DO:
      blag = JURPERS.NAMN.
   END.   
END PROCEDURE.


