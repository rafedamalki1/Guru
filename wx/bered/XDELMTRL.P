OPEN QUERY mq FOR EACH MTRL WHERE MTRL.LEVKOD = "4" NO-LOCK.
DO TRANSACTION:
   GET FIRST mq EXCLUSIVE-LOCK.
   DELETE MTRL.
END.
REPEAT:
   DO TRANSACTION:
      GET NEXT mq EXCLUSIVE-LOCK.
      IF AVAILABLE MTRL THEN DELETE MTRL.
      ELSE LEAVE.
   END.
END.         
