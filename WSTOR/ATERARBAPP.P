/*ATERARBAPP.P*/
{STORTEMP.I}
{STRTEMP.I}
DEFINE TEMP-TABLE extravstorntemp NO-UNDO LIKE urstorntemp.
DEFINE TEMP-TABLE extrabortkoppladtemp NO-UNDO LIKE bortkoppladtemp.
DEFINE INPUT PARAMETER varstornummer AS INTEGER NO-UNDO.
DEFINE OUTPUT PARAMETER TABLE FOR extravstorntemp.
DEFINE OUTPUT PARAMETER TABLE FOR extrabortkoppladtemp.


FIND FIRST STORNINGSTAB WHERE STORNINGSTAB.STORNUMMERID = varstornummer NO-LOCK NO-ERROR.        
CREATE extravstorntemp.
BUFFER-COPY STORNINGSTAB TO extravstorntemp.
OPEN QUERY bq FOR EACH BORTKOPPLAD WHERE BORTKOPPLAD.STORNUMMERID = varstornummer NO-LOCK.
GET FIRST bq NO-LOCK.
DO  WHILE AVAILABLE(BORTKOPPLAD):
   CREATE extrabortkoppladtemp.
   BUFFER-COPY BORTKOPPLAD TO extrabortkoppladtemp.
   GET NEXT bq NO-LOCK.
END.
CLOSE QUERY bq.
