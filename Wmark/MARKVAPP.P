/*MARKVAPP.P*/
{STARTFORAPP.I}
{MARKVARD.I}

PROCEDURE markdivhmt.
   DEFINE OUTPUT PARAMETER TABLE FOR markdivtemp.
   FIND FIRST MARKDIV NO-LOCK NO-ERROR.
   IF AVAILABLE MARKDIV THEN DO:
      CREATE markdivtemp.
      BUFFER-COPY MARKDIV TO markdivtemp.
   END.       
END PROCEDURE.

PROCEDURE klar.
   DEFINE INPUT PARAMETER ivarde AS INTEGER NO-UNDO.
   DEFINE INPUT PARAMETER FILL-IN_basbelopp AS INTEGER NO-UNDO.
   DEFINE INPUT PARAMETER FILL-IN_FAKTORFS AS INTEGER NO-UNDO.
   DEFINE INPUT PARAMETER FILL-IN_MOMS AS DECIMAL NO-UNDO.
   DEFINE INPUT PARAMETER FILL-IN_IPVARDE AS INTEGER NO-UNDO.
   DEFINE INPUT PARAMETER FILL-IN_ITVARDE AS INTEGER NO-UNDO.
   DEFINE INPUT PARAMETER FILL-IN_PRISTIDPUNKT AS CHARACTER NO-UNDO.
   DO TRANSACTION:
      FIND FIRST MARKDIV WHERE MARKDIV.ITVARDE = ivarde EXCLUSIVE-LOCK NO-ERROR.
      IF NOT AVAILABLE MARKDIV THEN DO:
         CREATE MARKDIV.
      END.
      ASSIGN
      /*borttaget från admin och bara lagt i program 20220118 Lena
      MARKDIV.basbelopp = FILL-IN_basbelopp*/
      MARKDIV.FAKTORFS = FILL-IN_FAKTORFS
      MARKDIV.MOMS = FILL-IN_MOMS
      MARKDIV.IPVARDE = FILL-IN_IPVARDE
      MARKDIV.ITVARDE = FILL-IN_ITVARDE
      MARKDIV.PRISTIDPUNKT = FILL-IN_PRISTIDPUNKT.  
   END.
   RELEASE MARKDIV NO-ERROR.
END PROCEDURE.
