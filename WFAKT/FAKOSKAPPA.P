/*FAKOSKAPPA.P*/
  &Scoped-define NEW NEW                          
{FAKTTEMP.I}
DEFINE INPUT PARAMETER fnr AS INTEGER NO-UNDO.
DEFINE INPUT PARAMETER kreditnrvar AS INTEGER NO-UNDO.
DEFINE OUTPUT PARAMETER TABLE FOR kosttemp.   
EMPTY TEMP-TABLE kosttemp NO-ERROR. 

/*ALLA SPARADE KOSTREG*/
FOR EACH FAKTKOSTKRED WHERE FAKTKOSTKRED.FAKTNR = fnr AND
FAKTKOSTKRED.FDELNR = kreditnrvar NO-LOCK:
   CREATE kosttemp.               
   BUFFER-COPY FAKTKOSTKRED EXCEPT FAKTKOSTKRED.FAKTNR TO kosttemp.
   ASSIGN
   kosttemp.FAKTNR = FAKTKOSTKRED.VERNR 
   kosttemp.FRTJPAKR = FAKTKOSTKRED.MASKKOST * FAKTKOSTKRED.FRTJPA / 100
   kosttemp.MTRLPAKR = FAKTKOSTKRED.MTRL * FAKTKOSTKRED.MTRLPA / 100.         
END.    

FOR EACH MOMSTAB NO-LOCK,
EACH kosttemp WHERE kosttemp.MOMSID = MOMSTAB.MOMSID:
   kosttemp.MOMSKOD = MOMSTAB.MOMSKOD.
END. 


