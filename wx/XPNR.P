DEF VAR persnr AS CHARACTER FORMAT "999999-9999".
DEF TEMP-TABLE PV
   FIELD ANST AS CHARACTER
   FIELD ENAMN AS CHARACTER
   FIELD NAMN AS CHARACTER   
   FIELD PNR AS CHARACTER FORMAT "99999999-9999".
  
INPUT FROM f:/elplo/HR-lön/anstnr.d NO-ECHO.

REPEAT TRANSACTION:
   CREATE PV.
   ASSIGN.
   IMPORT PV.
END.

for each pv:
   persnr = SUBSTRING(PV.PNR,3,11).
   DO TRANSACTION:
      FIND FIRST PERSONALTAB WHERE PERSONALTAB.PERSONNUMMER = persnr EXCLUSIVE-LOCK NO-ERROR.
      IF AVAILABLE PERSONALTAB THEN DO:
        assign PERSONALTAB.ANSTNR = PV.ANST.   
/*         DISPLAY PERSONALTAB.PERSONALKOD PV.PNR PERSONALTAB.ANSTNR PV.ANST FORMAT "99999999".*/
      END.   
   END.   
      
end.

 
      
   
   
