/*EXCMTRLAPP.P*/
{MTRLTEMP.I}

PROCEDURE mtrlhmt_UI :
   DEFINE INPUT PARAMETER vald_lev AS CHARACTER NO-UNDO.
   DEFINE OUTPUT PARAMETER TABLE FOR mtrltemp.
   EMPTY TEMP-TABLE mtrltemp NO-ERROR. 
   OPEN QUERY mq FOR EACH MTRL WHERE MTRL.LEVKOD = vald_lev AND
   MTRL.KALKNR = 0 AND MTRL.NPRIS = 0 USE-INDEX LEV NO-LOCK BY MTRL.ENR.
   GET FIRST mq NO-LOCK.
   DO WHILE AVAILABLE(MTRL):
      CREATE mtrltemp.
      BUFFER-COPY MTRL TO mtrltemp.
      ASSIGN 
      mtrltemp.ENHET = LC(mtrltemp.ENHET)
      mtrltemp.MTRLROW = ROWID(MTRL).
      GET NEXT mq NO-LOCK.
   END.
   CLOSE QUERY mq.

END PROCEDURE.
