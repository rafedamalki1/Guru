
/*XSKAPBDEPAO.P*/
/*PROJDEPNR = DEPNR FÖR ORDINARIE inköp.
för uttagen och trumma ska DEPNR sättas till den depå den tas ut från
summera INKMTRL på enr först innan skapande av BESTDEPAO*/
FOR EACH inkadress where inkadress.AONRaonr = "35169" AND inkadress.AONRDELNR = 0 and inkadress.leveransdatum > 01/01/2018,
EACH INKMTRL WHERE INKMTRL.INKBESTID = INKADRESS.INKBESTID.
   CREATE BESTDEPAO.
  ASSIGN
  BESTDEPAO.INKBESTID = INKADRESS.INKBESTID
  BESTDEPAO.INKID = INKADRESS.INKID
  BESTDEPAO.ORDERNUMMER = INKADRESS.ORDERNUMMER 
  BESTDEPAO.BESTDATUM = INKADRESS.BESTDATUM 
  BESTDEPAO.AONRAONR = INKADRESS.AONRAONR
  BESTDEPAO.AONRDELNR = INKADRESS.AONRDELNR
  BESTDEPAO.BERNR = INKADRESS.BERNR
  BESTDEPAO.OMRADE = INKADRESS.OMRADE
  BESTDEPAO.DEPNR = INKADRESS.DEP-NR
  BESTDEPAO.PROJDEPNR = INKADRESS.DEP-NR
  BESTDEPAO.BERNR = INKADRESS.BERNR
  BESTDEPAO.KLOCKAN = INKADRESS.KLOCKAN
  BESTDEPAO.BESTTID = INKADRESS.BESTTID
  BESTDEPAO.BESTALLARE = INKADRESS.ANVANDARE
  BESTDEPAO.LEVERANSDATUM = INKADRESS.LEVERANSDATUM

 
  BESTDEPAO.ENR = INKMTRL.ENR
  BESTDEPAO.PRIS = INKMTRL.PRISINK
  BESTDEPAO.LEVKOD = INKMTRL.LEVKODINK 
  BESTDEPAO.ANTAL  = INKMTRL.INKANTAL
  BESTDEPAO.ENHET  = INKMTRL.ENHET  
  BESTDEPAO.BENAMNING = INKMTRL.BENAMNING 
  BESTDEPAO.ENR = INKMTRL.ENR.
  
  
  /*FOR EACH BESTDEPAO WHERE EXCLUSIVE-LOCK:
     FIND FIRST INKADRESS  WHERE INKADRESS.INKBESTID =  bestdepao.INKBESTID NO-LOCK NO-ERROR.
     IF AVAILABLE INKADRESS THEN DO:
         BESTDEPAO.LEVERANSDATUM = INKADRESS.LEVERANSDATUM.
      END.   
=======
/*XSKAPBDEPAO.P*/
/*PROJDEPNR = DEPNR FÖR ORDINARIE inköp.
för uttagen och trumma ska DEPNR sättas till den depå den tas ut från
summera INKMTRL på enr först innan skapande av BESTDEPAO*/
FOR EACH inkadress where inkadress.AONRaonr = "35169" AND inkadress.AONRDELNR = 0 and inkadress.leveransdatum > 01/01/2018,
EACH INKMTRL WHERE INKMTRL.INKBESTID = INKADRESS.INKBESTID.
   CREATE BESTDEPAO.
  ASSIGN
  BESTDEPAO.INKBESTID = INKADRESS.INKBESTID
  BESTDEPAO.INKID = INKADRESS.INKID
  BESTDEPAO.ORDERNUMMER = INKADRESS.ORDERNUMMER 
  BESTDEPAO.BESTDATUM = INKADRESS.BESTDATUM 
  BESTDEPAO.AONRAONR = INKADRESS.AONRAONR
  BESTDEPAO.AONRDELNR = INKADRESS.AONRDELNR
  BESTDEPAO.BERNR = INKADRESS.BERNR
  BESTDEPAO.OMRADE = INKADRESS.OMRADE
  BESTDEPAO.DEPNR = INKADRESS.DEP-NR
  BESTDEPAO.PROJDEPNR = INKADRESS.DEP-NR
  BESTDEPAO.BERNR = INKADRESS.BERNR
  BESTDEPAO.KLOCKAN = INKADRESS.KLOCKAN
  BESTDEPAO.BESTTID = INKADRESS.BESTTID
  BESTDEPAO.BESTALLARE = INKADRESS.ANVANDARE
  BESTDEPAO.LEVERANSDATUM = INKADRESS.LEVERANSDATUM

 
  BESTDEPAO.ENR = INKMTRL.ENR
  BESTDEPAO.PRIS = INKMTRL.PRISINK
  BESTDEPAO.LEVKOD = INKMTRL.LEVKODINK 
  BESTDEPAO.ANTAL  = INKMTRL.INKANTAL
  BESTDEPAO.ENHET  = INKMTRL.ENHET  
  BESTDEPAO.BENAMNING = INKMTRL.BENAMNING 
  BESTDEPAO.ENR = INKMTRL.ENR.
  
  
  /*FOR EACH BESTDEPAO WHERE EXCLUSIVE-LOCK:
     FIND FIRST INKADRESS  WHERE INKADRESS.INKBESTID =  bestdepao.INKBESTID NO-LOCK NO-ERROR.
     IF AVAILABLE INKADRESS THEN DO:
         BESTDEPAO.LEVERANSDATUM = INKADRESS.LEVERANSDATUM.
      END.   
>>>>>>> branch 'master' of file:///\\server05\delad\REMOTEGURU\GuruRemote.git
  END.*/
