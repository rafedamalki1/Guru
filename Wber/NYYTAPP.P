/*NYYTAPP.P*/
{SCADMIN.I}

PROCEDURE btnok_UI :
   DEFINE INPUT-OUTPUT PARAMETER TABLE FOR eytbelaggtemp.
   FIND FIRST eytbelaggtemp NO-LOCK NO-ERROR.
   IF eytbelaggtemp.ID > 0 THEN DO TRANSACTION:
      FIND YTBELAGG WHERE YTBELAGG.ID = eytbelaggtemp.ID EXCLUSIVE-LOCK NO-ERROR.
      IF AVAILABLE YTBELAGG THEN DO:
         BUFFER-COPY eytbelaggtemp TO YTBELAGG.
      END.
   END.
   ELSE DO TRANSACTION:   
      FIND LAST YTBELAGG USE-INDEX ID NO-LOCK NO-ERROR.
      IF AVAILABLE YTBELAGG THEN eytbelaggtemp.ID = YTBELAGG.ID.
      eytbelaggtemp.ID = eytbelaggtemp.ID + 1.
      CREATE YTBELAGG.
      BUFFER-COPY eytbelaggtemp TO YTBELAGG.
   END.
     
   RELEASE YTBELAGG NO-ERROR.
END PROCEDURE.
