/*DELNRANDAPP.P*/
&Scoped-define NEW NEW
{GLOBVAR2DEL1.I}
PROCEDURE aonrsekkoll_UI :
   DEFINE INPUT PARAMETER ganv AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER vforc AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER omrvar AS CHARACTER NO-UNDO.
   DEFINE OUTPUT PARAMETER felok AS LOGICAL NO-UNDO.
   IF vforc NE "ja" THEN RETURN.
   IF ganv = CHR(69) + CHR(76) + CHR(80) + CHR(65) + CHR(79)   THEN RETURN.
   IF omrvar = "" THEN RETURN.
   FIND FIRST OFFERT WHERE OFFERT.OFFNR = 1 AND OFFERT.OFFANV = ganv AND OFFERT.OMRADE = omrvar NO-LOCK NO-ERROR.
   IF NOT AVAILABLE OFFERT THEN DO:
      felok = TRUE.      
   END.
   ELSE DO:
      felok = FALSE.
   END.
END PROCEDURE.
PROCEDURE delnrand_UI.
   DEFINE INPUT PARAMETER aonrvar AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER delnrvar AS INTEGER NO-UNDO.
   DEFINE OUTPUT PARAMETER TABLE FOR felmeddtemp.
   EMPTY TEMP-TABLE felmeddtemp NO-ERROR.    
   FIND FIRST AONRTAB WHERE AONRTAB.AONR = aonrvar AND 
   AONRTAB.DELNR = delnrvar NO-LOCK NO-ERROR.
   IF AVAILABLE AONRTAB THEN DO:
      CREATE felmeddtemp.
      ASSIGN felmeddtemp.FELMEDD = "Delnr " + STRING(delnrvar,">99") + " är redan upptaget.".
      RETURN.
   END.
   RETURN.
END PROCEDURE.
