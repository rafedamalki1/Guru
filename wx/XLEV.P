
/*------------------------------------------------------------------------
    File        : XLEV.P
    Purpose     : 

    Syntax      :

    Description : 

    Author(s)   : 
    Created     : Mon Nov 09 16:44:14 CET 2020
    Notes       :
  ----------------------------------------------------------------------*/
/*
 FOR EACH BETFRIA WHERE BETFRIA.TYP =  "1" EXCLUSIVE-LOCK:
    BETFRIA.TYP = "20103" .
 END.
 FOR EACH BETFRIA WHERE BETFRIA.TYP =  "8" EXCLUSIVE-LOCK:
    BETFRIA.TYP = "20101" .
 END.
 FOR EACH BETFRIA WHERE BETFRIA.TYP =  "5" EXCLUSIVE-LOCK:
    BETFRIA.TYP = "20102" .
 END.
 FOR EACH BETFRIA WHERE BETFRIA.TYP =  "2" EXCLUSIVE-LOCK:
    BETFRIA.TYP = "20100" .
 END.
 FOR EACH BETFRIA WHERE BETFRIA.TYP =  "32" EXCLUSIVE-LOCK:
    BETFRIA.TYP = "22336" .
 END.
 FOR EACH BETFRIA WHERE BETFRIA.TYP =  "30" EXCLUSIVE-LOCK:
    BETFRIA.TYP = "20413" .
 END.
 FOR EACH BETFRIA WHERE BETFRIA.TYP =  "12" EXCLUSIVE-LOCK:
    BETFRIA.TYP = "20274" .
 END.
 FOR EACH BETFRIA WHERE BETFRIA.TYP =  "7" EXCLUSIVE-LOCK:
    BETFRIA.TYP = "24834" .
 END.
 */
DEFINE BUFFER MTRbuff FOR MTRL.   
FOR EACH MTRL WHERE MTRL.INANVPROG BEGINS "MTRLIFS" NO-LOCK:
   DO TRANSACTION:
      FIND FIRST MTRbuff WHERE MTRbuff.Enr = MTRL.Enr AND MTRbuff.levkod  = MTRL.LEVKOD AND RECID(MTRbuff) NE RECID(MTRL)   EXCLUSIVE-LOCK NO-ERROR.
      IF AVAILABLE MTRbuff THEN DELETE MTRbuff.
   END.
END.