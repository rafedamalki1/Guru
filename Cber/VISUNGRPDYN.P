/* VISUNGRPDYN.P */
{ALLDEF.I}
 /* bara för Guru.Konstanter:gaok */
{VISUNGRPWID.I}



PROCEDURE skapabrw_UI : 
   DEFINE INPUT  PARAMETER brvnr AS INTEGER NO-UNDO.  
   DEFINE INPUT  PARAMETER tthandlez AS HANDLE NO-UNDO.
   DEFINE VARIABLE brwantal AS INTEGER NO-UNDO.
   RUN musw IN huvprogh.
   RUN DYNBRWINIT.P PERSISTENT SET brwproc[brvnr].
   RUN newbrw_UI IN brwproc[brvnr] (INPUT THIS-PROCEDURE).
   IF brvnr = 1 THEN DO:
      RUN brwegenskap_UI IN brwproc[brvnr] (INPUT tthandlez,INPUT "BRW_MTRL", INPUT 124, INPUT 10, INPUT TRUE, INPUT TRUE, INPUT "Alla undergrupper i beredningsupplägget", INPUT FRAME-MTRL).
      RUN fieldinit_UI IN brwproc[brvnr].
      RUN createfields_UI IN brwproc[brvnr] (INPUT "KBENAMNING", INPUT "Konstruktionsgrupp", INPUT 20, INPUT "x(256)", INPUT TRUE).
      RUN createfields_UI IN brwproc[brvnr] (INPUT "KTYPKOD", INPUT "Konstruktion",  INPUT 20, INPUT "x(256)", INPUT TRUE).
      RUN createfields_UI IN brwproc[brvnr] (INPUT "BB", INPUT "Rubrikundergrupp",  INPUT 20, INPUT "x(256)", INPUT TRUE).
      RUN createfields_UI IN brwproc[brvnr] (INPUT "KVALKOD", INPUT "Undergrupp",  INPUT 20, INPUT "x(256)", INPUT TRUE).
      RUN createfields_UI IN brwproc[brvnr] (INPUT "UBENAMNING", INPUT "Benämning undergrupp",  INPUT 20, INPUT "x(256)", INPUT TRUE).                  
      RUN fieldslut_UI IN brwproc[brvnr].
      RUN getantal_UI IN brwproc[brvnr].      
   END.
      
   RUN musa IN huvprogh.
END PROCEDURE.

PROCEDURE avs_UI :
   {BORTBRWPROC.I}
END PROCEDURE.
PROCEDURE infoes_UI :
   DEFINE INPUT  PARAMETER valenr AS CHARACTER NO-UNDO.
   DEFINE INPUT  PARAMETER brwname AS CHARACTER NO-UNDO.
   DEFINE INPUT  PARAMETER dynbrwph AS HANDLE NO-UNDO.  
   DEFINE VARIABLE levnamnvar AS CHARACTER NO-UNDO.
   
   RUN cellvalue_UI IN dynbrwph (INPUT "LEVNAMN", OUTPUT levnamnvar).
   IF levnamnvar = ? OR levnamnvar = "" THEN DO:
      /*IF brwname = "BRW_MTRL" THEN RUN cellvalue_UI IN brwproc[15] (INPUT "LEVNAMN", OUTPUT levnamnvar).*/
      levnamnvar = "Ahlsell". 
   END.   
   {LEVLANK.I}       
END PROCEDURE.


