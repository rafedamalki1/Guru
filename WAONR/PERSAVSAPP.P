/*PERSAVSAPP.P*/
&Scoped-define NEW NEW
&Scoped-define SHARED SHARED
{GLOBVAR2DEL1.I}

{AVTAONRTEMP.I}
{TIDREGITEMP.I}


PROCEDURE ladda.
   DEFINE INPUT PARAMETER aonrvar AS CHARACTER NO-UNDO.
   DEFINE INPUT PARAMETER delnrvar AS INTEGER NO-UNDO.
   DEFINE INPUT PARAMETER regdatum AS DATE NO-UNDO.
   DEFINE OUTPUT PARAMETER TABLE FOR tidregitemp.
   EMPTY TEMP-TABLE tidregitemp NO-ERROR.    
   OPEN QUERY tq FOR EACH TIDREGITAB WHERE TIDREGITAB.DATUM > regdatum AND 
   TIDREGITAB.AONR =aonrvar AND TIDREGITAB.DELNR =delnrvar USE-INDEX AONR NO-LOCK.
   GET FIRST tq NO-LOCK.
   DO  WHILE AVAILABLE(TIDREGITAB):
      CREATE tidregitemp.
      BUFFER-COPY TIDREGITAB TO tidregitemp.
      GET NEXT tq NO-LOCK.
   END.
   CLOSE QUERY tq.
END PROCEDURE.
