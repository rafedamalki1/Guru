DEFINE BUFFER BKONSTGRUPP FOR KONSTGRUPP.
DEFINE BUFFER BBBENAMNING FOR BBENAMNING.
DEFINE BUFFER BEDIGRUPP FOR EDIGRUPP.
DEFINE BUFFER BKONSTRUKTION FOR KONSTRUKTION.
DEFINE BUFFER BKONSTVAL FOR KONSTVAL.
DEFINE BUFFER BMTRLBER FOR MTRLBER.
   
   DO TRANSACTION:
      CREATE KONSTGRUPP.
      ASSIGN
      KONSTGRUPP.KONSKOD = 38
      KONSTGRUPP.BENAMNING = "Luftledning 52 kV BLL A/B"
      KONSTGRUPP.ORDNING = 38.
   END.

   OPEN QUERY ordq FOR EACH BBENAMNING WHERE BBENAMNING.KONSKOD = 12 NO-LOCK.
   GET FIRST ordq NO-LOCK.
   DO WHILE AVAILABLE(BBENAMNING):
      DO TRANSACTION:
         CREATE BBBENAMNING.
         BUFFER-COPY BBENAMNING TO BBBENAMNING.
         ASSIGN
         BBBENAMNING.KONSKOD = 38.
      END.
      GET NEXT ordq NO-LOCK.
   END.
   CLOSE QUERY ordq.

   OPEN QUERY ediq FOR EACH EDIGRUPP WHERE EDIGRUPP.KONSKOD = 12 NO-LOCK.
   GET FIRST ediq NO-LOCK.
   DO WHILE AVAILABLE(EDIGRUPP):
      DO TRANSACTION:
         CREATE BEDIGRUPP.
         BUFFER-COPY EDIGRUPP TO BEDIGRUPP.
         ASSIGN
         BEDIGRUPP.KONSKOD = 38.
      END.
      GET NEXT ediq NO-LOCK.
   END.
   CLOSE QUERY ediq.
  
   OPEN QUERY friq FOR EACH KONSTRUKTION WHERE KONSTRUKTION.KONSKOD = 12 NO-LOCK.     
   GET FIRST friq NO-LOCK.
   DO WHILE AVAILABLE(KONSTRUKTION):
      DO TRANSACTION:
         CREATE BKONSTRUKTION.
         BUFFER-COPY KONSTRUKTION TO BKONSTRUKTION.
         ASSIGN
         BKONSTRUKTION.KONSKOD = 38
         BKONSTRUKTION.KTYPKOD = "*" + BKONSTRUKTION.KTYPKOD.
      END.             
      GET NEXT friq NO-LOCK.
   END.
   CLOSE QUERY friq.
  
   OPEN QUERY berqid FOR EACH KONSTVAL WHERE KONSTVAL.KONSKOD = 12  NO-LOCK.      
   GET FIRST berqid NO-LOCK.
   DO WHILE AVAILABLE(KONSTVAL):       
      DO TRANSACTION:
         CREATE BKONSTVAL.
         BUFFER-COPY KONSTVAL TO BKONSTVAL.
         ASSIGN
         BKONSTVAL.KONSKOD = 38
         BKONSTVAL.KTYPKOD = "*" + BKONSTVAL.KTYPKOD.
      END.  
      GET NEXT berqid NO-LOCK.
   END.
   CLOSE QUERY berqid. 
  
   OPEN QUERY mq FOR EACH KONSTRUKTION WHERE KONSTRUKTION.KONSKOD = 12  NO-LOCK.     
   GET FIRST mq NO-LOCK.
   DO WHILE AVAILABLE(KONSTRUKTION):
      OPEN QUERY mq2 FOR EACH MTRLBER WHERE MTRLBER.KTYPKOD = KONSTRUKTION.KTYPKOD NO-LOCK.
      GET FIRST mq2 NO-LOCK.
      DO WHILE AVAILABLE(MTRLBER):
         DO TRANSACTION:
            CREATE BMTRLBER.
            BUFFER-COPY MTRLBER TO BMTRLBER.
            ASSIGN           
            BMTRLBER.KTYPKOD = "*" + BMTRLBER.KTYPKOD.
         END. 
         GET NEXT mq2 NO-LOCK.
      END.
      CLOSE QUERY mq2.          
      GET NEXT mq NO-LOCK.
   END.
   CLOSE QUERY mq.
